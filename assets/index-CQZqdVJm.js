const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-Cye_m1j7.js","assets/vendor-CGLmNOaL.js","assets/index-DcYgC3L6.css","assets/index-C3peYFCk.js","assets/index-Bi5mh6sE.css","assets/index-s9UQVDDC.js","assets/index-DfKYC8Yg.css","assets/index-Dk1AdslH.js","assets/index-Ckpw0aGg.css","assets/index-CzzNljx2.js","assets/index-D6U3niPM.css","assets/index-CRA4G_6w.js","assets/index-BCMWwCjA.js","assets/_404-B6yPps0T.js"])))=>i.map(i=>d[i]);
import{r as e,j as s,u as r,N as a,A as t,B as n,C as i,c as l,a as o,L as c,D as d,b as m,R as p,d as x,s as h,F as j,M as _,e as u,f as g,g as y,h as f,i as k,O as I,_ as E,k as D,l as N,S as b,m as v,n as O,o as z,H as A}from"./vendor-CGLmNOaL.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver((e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&s(e)})).observe(document,{childList:!0,subtree:!0})}function s(e){if(e.ep)return;e.ep=!0;const s=function(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?s.credentials="include":"anonymous"===e.crossOrigin?s.credentials="omit":s.credentials="same-origin",s}(e);fetch(e.href,s)}}();const C=e.createContext({userData:null,signin:()=>{},signout:()=>{}}),L=()=>e.useContext(C),w=({children:e})=>{const r={userData:{id:1,username:"test"},signin:e=>e(),signout:e=>e()};return s.jsx(C.Provider,{value:r,children:e})},R=e=>{const s=new RegExp("(^|;)?"+e+"=([^;]*)(;|$)"),r=document.cookie.match(s);return r?decodeURIComponent(r[2]):null},S=({name:e,value:s,isRemember:r,maxAge:a=2592e3})=>{document.cookie=r?`${e}=${s};secure;max-age=2592000;path=/`:`${e}=${s};secure;max-age=${a};path=/`},M=e=>{document.cookie=e+"=;max-age=0;path=/"},P=()=>{const e=R("refresh_token"),s=R("access_token");return null!==e||null!==s},T=({children:e})=>{const t=r();return P()?e:s.jsx(a,{to:"/login",state:{from:t.pathname},replace:!0})},V=({errorMessage:e,errorDetail:r})=>{const a=[{key:"1",label:s.jsx("span",{className:"error-page__collapse-header",children:"Детальнее"}),children:s.jsx("pre",{children:r})}];return s.jsxs("section",{className:"error-page__wrap",children:[s.jsx("span",{className:"error-page__header",children:"Ошибка на странице"}),s.jsx("span",{className:"error-page__code-text",children:"Возникла критическая ошибка на странице. Пожалуйста, сообщите администратору"}),s.jsx("span",{className:"error-page__code-desc"}),s.jsx("span",{className:"error-page__action",children:s.jsx(t,{message:e,showIcon:!0,description:s.jsx(i,{ghost:!0,items:a,className:"error-page__collapse"}),type:"error",action:s.jsx(n,{size:"small",danger:!0,children:"Отправить администратору"})})})]})};class J extends e.Component{constructor(e){super(e),this.state={hasError:!1,errorMessage:"",errorDetail:""}}static getDerivedStateFromError(e){return{hasError:!0,errorMessage:String(e)}}componentDidCatch(e,s){this.setState({errorDetail:s.componentStack})}render(){return this.state.hasError?s.jsx(V,{errorMessage:this.state.errorMessage,errorDetail:this.state.errorDetail}):this.props.children}}const Z=l("https://jldfyoxjzmvuvgosyqok.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpsZGZ5b3hqem12dXZnb3N5cW9rIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDMwNjg3MDksImV4cCI6MjA1ODY0NDcwOX0.KrALTAfsrMJeTC6B5_m8MsY1Hs5cphqD51NdhKlOvv0"),$="_wrapNavigateTop_nkhr3_1",q="_menu_nkhr3_5",X="_avatar_nkhr3_10",B=()=>{const{signout:r}=L(),a=o(),[t,n]=e.useState({user_name:"",id:0}),[i,l]=e.useState(!1),j=R("user_id");e.useEffect((()=>{0===t.id&&(async()=>{l(!0);try{const{data:e,error:s}=await Z.from("users").select("*").eq("uuid",j).single();if(s)throw s;n({user_name:e.user_name,id:e.id})}catch(e){h.error(e.message)}finally{l(!1)}})()}),[j]);const _=[{key:"1",label:s.jsx("span",{children:(()=>{const e=t.user_name.length>20?t.user_name.slice(0,20)+"...":t.user_name;return t.user_name?e:"Без имени"})()}),disabled:!0},{type:"divider"},{key:"2",label:s.jsx(c,{to:"profile",state:{id:t.id},children:"Профиль"})},{key:"3",label:s.jsx("span",{onClick:()=>{r((()=>{sessionStorage.clear(),localStorage.clear(),M("access_token"),M("refresh_token"),M("user_id"),a("/login",{replace:!0})}))},children:"Выход"})}];return s.jsx(d,{menu:{items:_},trigger:["click"],children:s.jsx(m,{size:"large",icon:i?s.jsx(p,{}):s.jsx(x,{}),className:X})})},F=[{label:"Площадки",key:"places",icon:s.jsx(u,{})},{label:"В игру",key:"games/reserved",icon:s.jsx(g,{})},{label:"Архив игр",key:"games/archive",icon:s.jsx(y,{})},{label:"Помощь",key:"help",icon:s.jsx(f,{})}],K=e.memo((()=>{const r=o(),[a,t]=e.useState("games/reserved");e.useEffect((()=>{r(a)}),[a]);return s.jsxs(j,{justify:"space-between",className:$,align:"center",children:[s.jsx(_,{onClick:e=>t(e.key),selectedKeys:[a],mode:"horizontal",items:F,className:q}),s.jsx(B,{})]})})),{Content:Y}=k,G=()=>s.jsx(k,{className:"wrap-container",children:s.jsxs(k,{children:[s.jsx(K,{}),s.jsx(Y,{className:"wrap-main",children:s.jsx(J,{children:s.jsx(I,{})})})]})}),H=({children:e})=>P()?s.jsx(a,{to:"/",replace:!0}):e,U=e.lazy((()=>E((()=>import("./index-Cye_m1j7.js")),__vite__mapDeps([0,1,2])))),Q=()=>s.jsxs(D,{children:[s.jsx(N,{path:"reserved/",element:s.jsx(U,{})}),s.jsx(N,{path:"archive/",element:s.jsx(U,{isArchive:!0})})]}),W=e.lazy((()=>E((()=>import("./index-C3peYFCk.js")),__vite__mapDeps([3,1,4])))),ee=e.lazy((()=>E((()=>import("./index-s9UQVDDC.js")),__vite__mapDeps([5,1,6])))),se=e.lazy((()=>E((()=>import("./index-Dk1AdslH.js")),__vite__mapDeps([7,1,8])))),re=e.lazy((()=>E((()=>import("./index-CzzNljx2.js")),__vite__mapDeps([9,1,10])))),ae=e.lazy((()=>E((()=>import("./index-CRA4G_6w.js")),__vite__mapDeps([11,1])))),te=e.lazy((()=>E((()=>import("./index-BCMWwCjA.js")),__vite__mapDeps([12,1])))),ne=e.lazy((()=>E((()=>import("./_404-B6yPps0T.js")),__vite__mapDeps([13,1])))),ie=()=>s.jsx(e.Suspense,{fallback:s.jsx(b,{style:{display:"flex",alignItems:"center",justifyContent:"center",marginTop:"40vh"}}),children:s.jsxs(D,{children:[s.jsxs(N,{element:s.jsx(T,{children:s.jsx(G,{})}),children:[s.jsx(N,{path:"/places/",element:s.jsx(se,{})}),s.jsx(N,{path:"/places/:initId/",element:s.jsx(re,{})}),s.jsx(N,{path:"/profile/",element:s.jsx(ae,{})}),s.jsx(N,{path:"/help/",element:s.jsx(te,{})}),s.jsx(N,{path:"/games/*",element:s.jsx(Q,{})}),s.jsx(N,{path:"/",element:s.jsx(ee,{})}),s.jsx(N,{path:"*",element:s.jsx(ne,{})})]}),s.jsx(N,{element:s.jsx(H,{children:s.jsx(W,{})}),children:s.jsx(N,{path:"login"})}),s.jsx(N,{path:"*",element:s.jsx(ne,{})})]})}),le=()=>s.jsx(v,{locale:O,children:s.jsx(w,{children:s.jsx(ie,{})})}),oe=s.jsx(A,{children:s.jsx(le,{})});z.createRoot(document.getElementById("wrap")).render(oe);export{S as a,R as g,Z as s,L as u};
