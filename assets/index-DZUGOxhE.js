const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DXNP_vy6.js","assets/vendor-DhVSYgwY.js","assets/index-CeeoPFAf.css","assets/index-BzzNDm78.js","assets/index-Q_dzBL2Y.js","assets/index-Bi5mh6sE.css","assets/index-Dz1ptD7a.js","assets/index-DfKYC8Yg.css","assets/index-ULGN95Qj.js","assets/index-Ckpw0aGg.css","assets/index-B_wp3Fgt.js","assets/index-D6U3niPM.css","assets/index-B3B-7Bi9.js","assets/index-BTdipkSU.js","assets/_404-CpU-BSFq.js"])))=>i.map(i=>d[i]);
import{r as e,j as s,u as r,N as a,A as t,B as n,C as i,c as l,a as o,L as c,D as d,b as m,R as p,d as x,s as h,F as j,M as _,e as u,f as g,g as y,h as f,i as k,O as I,_ as E,k as D,l as N,S as b,m as v,n as O,o as z,H as L}from"./vendor-DhVSYgwY.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver((e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&s(e)})).observe(document,{childList:!0,subtree:!0})}function s(e){if(e.ep)return;e.ep=!0;const s=function(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?s.credentials="include":"anonymous"===e.crossOrigin?s.credentials="omit":s.credentials="same-origin",s}(e);fetch(e.href,s)}}();const A=e.createContext({userData:null,signin:()=>{},signout:()=>{}}),C=()=>e.useContext(A),R=({children:e})=>{const r={userData:{id:1,username:"test"},signin:e=>e(),signout:e=>e()};return s.jsx(A.Provider,{value:r,children:e})},w=e=>{const s=new RegExp("(^|;)?"+e+"=([^;]*)(;|$)"),r=document.cookie.match(s);return r?decodeURIComponent(r[2]):null},S=({name:e,value:s,isRemember:r,maxAge:a=2592e3})=>{document.cookie=r?`${e}=${s};secure;max-age=2592000;path=/`:`${e}=${s};secure;max-age=${a};path=/`},M=e=>{document.cookie=e+"=;max-age=0;path=/"},P=()=>{const e=w("refresh_token"),s=w("access_token");return null!==e||null!==s},T=({children:e})=>{const t=r();return P()?e:s.jsx(a,{to:"/login",state:{from:t.pathname},replace:!0})},V=({errorMessage:e,errorDetail:r})=>{const a=[{key:"1",label:s.jsx("span",{className:"error-page__collapse-header",children:"Детальнее"}),children:s.jsx("pre",{children:r})}];return s.jsxs("section",{className:"error-page__wrap",children:[s.jsx("span",{className:"error-page__header",children:"Ошибка на странице"}),s.jsx("span",{className:"error-page__code-text",children:"Возникла критическая ошибка на странице. Пожалуйста, сообщите администратору"}),s.jsx("span",{className:"error-page__code-desc"}),s.jsx("span",{className:"error-page__action",children:s.jsx(t,{message:e,showIcon:!0,description:s.jsx(i,{ghost:!0,items:a,className:"error-page__collapse"}),type:"error",action:s.jsx(n,{size:"small",danger:!0,children:"Отправить администратору"})})})]})};class J extends e.Component{constructor(e){super(e),this.state={hasError:!1,errorMessage:"",errorDetail:""}}static getDerivedStateFromError(e){return{hasError:!0,errorMessage:String(e)}}componentDidCatch(e,s){this.setState({errorDetail:s.componentStack})}render(){return this.state.hasError?s.jsx(V,{errorMessage:this.state.errorMessage,errorDetail:this.state.errorDetail}):this.props.children}}const Z="_wrapNavigateTop_nkhr3_1",$="_menu_nkhr3_5",q="_avatar_nkhr3_10",X=l("https://jldfyoxjzmvuvgosyqok.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpsZGZ5b3hqem12dXZnb3N5cW9rIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDMwNjg3MDksImV4cCI6MjA1ODY0NDcwOX0.KrALTAfsrMJeTC6B5_m8MsY1Hs5cphqD51NdhKlOvv0"),B=()=>{const{signout:r}=C(),a=o(),[t,n]=e.useState({user_name:"",id:0}),[i,l]=e.useState(!1),j=w("user_id");e.useEffect((()=>{(async()=>{l(!0);try{const{data:e,error:s}=await X.from("users").select("*").eq("uuid",j);if(s)throw s;n({user_name:e[0].user_name,id:e[0].id})}catch(e){h.error(e.message)}finally{l(!1)}})()}),[j]);const _=[{key:"1",label:s.jsx("span",{children:(()=>{const e=t.user_name.length>20?t.user_name.slice(0,20)+"...":t.user_name;return t.user_name?e:"Без имени"})()}),disabled:!0},{type:"divider"},{key:"2",label:s.jsx(c,{to:"profile",state:{id:t.id},children:"Профиль"})},{key:"3",label:s.jsx("span",{onClick:()=>{r((()=>{sessionStorage.clear(),localStorage.clear(),M("access_token"),M("refresh_token"),M("user_id"),a("/login",{replace:!0})}))},children:"Выход"})}];return s.jsx(d,{menu:{items:_},trigger:["click"],children:s.jsx(m,{size:"large",icon:i?s.jsx(p,{}):s.jsx(x,{}),className:q})})},F=[{label:s.jsx(c,{to:"places",children:"Площадки"}),key:"places",icon:s.jsx(u,{})},{label:s.jsx(c,{to:"games/reserved",children:"В игру"}),key:"reserved_game",icon:s.jsx(g,{})},{label:s.jsx(c,{to:"games/archive",children:"Архив игр"}),key:"archive_games",icon:s.jsx(y,{})},{label:s.jsx(c,{to:"help",children:"Помощь"}),key:"help",icon:s.jsx(f,{})}],K=e.memo((()=>{const[r,a]=e.useState("places");return s.jsxs(j,{justify:"space-between",className:Z,align:"center",children:[s.jsx(_,{onClick:e=>a(e.key),selectedKeys:[r],mode:"horizontal",items:F,className:$}),s.jsx(B,{})]})})),{Content:Y}=k,G=()=>s.jsx(k,{className:"wrap-container",children:s.jsxs(k,{children:[s.jsx(K,{}),s.jsx(Y,{className:"wrap-main",children:s.jsx(J,{children:s.jsx(I,{})})})]})}),H=({children:e})=>P()?s.jsx(a,{to:"/",replace:!0}):e,U=e.lazy((()=>E((()=>import("./index-DXNP_vy6.js")),__vite__mapDeps([0,1,2])))),Q=e.lazy((()=>E((()=>import("./index-BzzNDm78.js")),__vite__mapDeps([3,1])))),W=()=>s.jsxs(D,{children:[s.jsx(N,{path:"reserved/",element:s.jsx(U,{})}),s.jsx(N,{path:"archive/",element:s.jsx(Q,{})})]}),ee=e.lazy((()=>E((()=>import("./index-Q_dzBL2Y.js")),__vite__mapDeps([4,1,5])))),se=e.lazy((()=>E((()=>import("./index-Dz1ptD7a.js")),__vite__mapDeps([6,1,7])))),re=e.lazy((()=>E((()=>import("./index-ULGN95Qj.js")),__vite__mapDeps([8,1,9])))),ae=e.lazy((()=>E((()=>import("./index-B_wp3Fgt.js")),__vite__mapDeps([10,1,11])))),te=e.lazy((()=>E((()=>import("./index-B3B-7Bi9.js")),__vite__mapDeps([12,1])))),ne=e.lazy((()=>E((()=>import("./index-BTdipkSU.js")),__vite__mapDeps([13,1])))),ie=e.lazy((()=>E((()=>import("./_404-CpU-BSFq.js")),__vite__mapDeps([14,1])))),le=()=>s.jsx(e.Suspense,{fallback:s.jsx(b,{style:{display:"flex",alignItems:"center",justifyContent:"center",marginTop:"40vh"}}),children:s.jsxs(D,{children:[s.jsxs(N,{element:s.jsx(T,{children:s.jsx(G,{})}),children:[s.jsx(N,{path:"/places/",element:s.jsx(re,{})}),s.jsx(N,{path:"/places/:initId/",element:s.jsx(ae,{})}),s.jsx(N,{path:"/profile/",element:s.jsx(te,{})}),s.jsx(N,{path:"/help/",element:s.jsx(ne,{})}),s.jsx(N,{path:"/games/*",element:s.jsx(W,{})}),s.jsx(N,{path:"/",element:s.jsx(se,{})}),s.jsx(N,{path:"*",element:s.jsx(ie,{})})]}),s.jsx(N,{element:s.jsx(H,{children:s.jsx(ee,{})}),children:s.jsx(N,{path:"login"})}),s.jsx(N,{path:"*",element:s.jsx(ie,{})})]})}),oe=()=>s.jsx(v,{locale:O,children:s.jsx(R,{children:s.jsx(le,{})})}),ce=s.jsx(L,{children:s.jsx(oe,{})});z.createRoot(document.getElementById("wrap")).render(ce);export{S as a,X as s,C as u};
